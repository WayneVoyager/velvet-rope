# Velvet Rope — 需求分析

**日期**：2026-02-24  
**状态**：已确认

## 背景

用户存在无意识打开网页、在分散注意力的网站上耗费大量时间的问题。需要一款 Chrome 插件，通过访问次数限制和摩擦机制来遏制冲动浏览行为。

## 核心需求

### 访问次数限制
- 用户输入域名 + 每日访问次数上限
- 插件自动记录当日对受限域名的访问次数
- 超限时屏蔽访问，重定向到拦截页并弹出提示

### 域名冗余匹配
- 设置 `woa.com` 时，所有子域名（如 `xxxx.woa.com/path`）均纳入统计
- 匹配规则：`hostname === pattern || hostname.endsWith('.' + pattern)`
- 均进行 `www.` 前缀标准化

### 计次规则（已与用户确认）
- 新标签页打开受限域名 → 计一次
- 页面刷新（F5）→ 计一次
- 同标签页内从 A 跳转到 B（同域） → 不重复计
- 同标签页内跳转至其他受限域名 → 为新域名计次

### 快速添加
- 点击插件图标，识别当前页域名，一键设置限制次数

### 临时解锁（质数挑战机制）
- 超限后，展示两个质数之积（如 `P₁ × P₂ = 1147`）
- 用户需正确填写两个质数因子（任意顺序）
- 验证通过后，授予 +1 额外访问次数，重定向回原页
- 质数位数可配置（1-4位），默认 2 位
- 每道题只有一次正确答案可得（质因子唯一分解定理保证）

## 边界条件

| 问题 | 用户决策 |
|------|---------|
| 用户卸载插件能绕过所有限制 | 接受，这是自律工具而非管控工具 |
| 数据是否跨设备同步 | 本地存储，不跨设备 |
| 跨设备/账号访问 | 不考虑 |

## 命名与风格

- 插件名：**Velvet Rope**（丝绒绳，高档门禁隐喻）
- UI 风格：拟物与扁平混合、高冷抽象、现代交互特征
- 色彩：深黑底色、冷灰文字、哑光金点缀（绳索色）
